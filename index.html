<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truy·ªán Ng·∫´u Nhi√™n</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #181818;
            color: white;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
        }
        img {
            max-width: 90vw; /* Kh√¥ng v∆∞·ª£t qu√° m√†n h√¨nh */
            max-height: 70vh; /* Gi·ªõi h·∫°n chi·ªÅu cao */
            border-radius: 10px;
            margin-bottom: 15px;
            object-fit: contain;
        }
        textarea {
            width: 100%;
            height: 150px;
            font-size: 14px;
            padding: 10px;
            margin-top: 15px;
            background: #282828;
            color: white;
            border: 1px solid #444;
        }
        button {
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 15px;
            background: #ff4c4c;
            border: none;
            color: white;
            border-radius: 5px;
        }
        a {
            color: #ffcc00;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>üìñ Truy·ªán Ng·∫´u Nhi√™n</h1>
        <img id="image" src="" alt="·∫¢nh truy·ªán">
        <h2 id="title"></h2>
        <p><strong>T√°c gi·∫£:</strong> <span id="author"></span></p>
        <p><strong>Th·ªÉ lo·∫°i:</strong> <span id="tags"></span></p>
        <p><strong>S·ªë trang:</strong> <span id="pages"></span></p>
        <p><strong>üîó Link:</strong> <a id="link" href="#" target="_blank">ƒê·ªçc Truy·ªán</a></p>
        <button onclick="fetchRandomManga()">üîÑ L·∫•y Truy·ªán Kh√°c</button>
        <h3>üì° API Response:</h3>
        <textarea id="output" readonly></textarea>
    </div>

    <script>
        var cors_api_url = "https://cors-anywhere.herokuapp.com/";

        async function fetchRandomManga() {
            let apiUrl = cors_api_url + "https://wholesomelist.com/api/random";
            
            try {
                let response = await fetch(apiUrl);
                let data = await response.json();

                document.getElementById("output").value = JSON.stringify(data, null, 2);

                if (data.result) {
                    let entry = data.entry;
                    document.getElementById("title").innerText = entry.title;
                    document.getElementById("author").innerText = entry.author || "Kh√¥ng r√µ";
                    document.getElementById("tags").innerText = entry.tags.join(", ") || "Kh√¥ng c√≥";
                    document.getElementById("pages").innerText = entry.pages;

                    // üîπ L·∫•y ·∫£nh t·ª´ `image`
                    let imageSrc = entry.image || "https://via.placeholder.com/400x600?text=No+Image";
                    document.getElementById("image").src = imageSrc;

                    // üîπ L·∫•y link theo th·ª© t·ª± ∆∞u ti√™n: eh ‚Üí im ‚Üí nh
                    let linkSrc = entry.eh || entry.im || entry.nh || "#";
                    document.getElementById("link").href = linkSrc;
                    document.getElementById("link").innerText = linkSrc.startsWith("http") ? linkSrc : "Kh√¥ng c√≥ link";
                }
            } catch (error) {
                console.error("L·ªói khi l·∫•y d·ªØ li·ªáu:", error);
                document.getElementById("output").value = "L·ªói k·∫øt n·ªëi API!";
            }
        }

        fetchRandomManga();
    </script>
</body>
</html>
